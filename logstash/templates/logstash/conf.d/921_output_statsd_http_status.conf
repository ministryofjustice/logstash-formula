output {

    # this should really be a type check but we're not good at assigning them
    # consistently.
    if [@fields][request_uri] {
      statsd {
        increment => [
          "%{host}.indexer.http_requests.by-status.%{[@fields][status]}",
          "%{host}.indexer.http_requests.all"
        ]
        sender => "per-host"
      }
      statsd {
        increment => [
          "indexer.http_requests.by-status.%{[@fields][status]}",
          "indexer.http_requests.all"
        ]
        sender => "all"
      }
    }

}
